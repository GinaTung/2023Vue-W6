import{_ as g,o as r,c as i,a as t,F as _,f as p,g as m,t as n,d as C,h as b,v as x}from"./index-b165a140.js";const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"yuling202202",BASE_URL:"/2023Vue-W6",MODE:"production",DEV:!1,PROD:!0},I={data(){return{products:[],productId:"",cart:"",loadingItem:""}},methods:{getCarts(){this.$http.get(`${h}/api/${u}/cart`).then(e=>{console.log("購物車:",e.data),this.cart=e.data.data}).catch(e=>{console.log(e.data.message)})},updataCartItem(e){const a={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${h}/api/${u}/cart/${e.id}`,{data:a}).then(d=>{console.log("更新購物車:",d.data),this.getCarts(),this.loadingItem=""}).catch(d=>{console.log(d.data.message)})},deleteItem(e){this.loadingItem=e.id,this.$http.delete(`${h}/api/${u}/cart/${e.id}`).then(a=>{console.log("刪除購物車:",a.data),alert(`刪除購物車商品:${e.product.title}`),this.getCarts(),this.loadingItem=""}).catch(a=>{console.log(a.data.message)})},deleteAllCarts(){this.$http.delete(`${h}/api/${u}/carts`).then(e=>{console.log("清除購物車全部商品:",e.data.message),alert("清除購物車全部商品已完成"),this.getCarts()}).catch(e=>{alert(e.data.message)})}},mounted(){this.getCarts()}},f={class:"container"},y=t("h2",{class:"text-center"},"This is 購物車頁面",-1),v={class:"text-end"},V={class:"table align-middle"},$=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),P={type:"button",class:"btn btn-outline-danger btn-sm"},A=["onClick","disabled"],k={class:"input-group input-group-sm"},E=["onUpdate:modelValue","disabled","onChange"],T=["value"],D={class:"text-end"},U=t("td",{colspan:"3",class:"text-end"},"總計",-1),q={class:"text-end"},B=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),L={class:"text-end text-success"};function R(e,a,d,w,o,c){return r(),i("div",f,[y,t("div",v,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:a[0]||(a[0]=(...s)=>c.deleteAllCarts&&c.deleteAllCarts(...s))},"清空購物車")]),t("table",V,[$,t("tbody",null,[o.cart.carts?(r(!0),i(_,{key:0},p(o.cart.carts,s=>(r(),i("tr",{key:s.id},[t("td",null,[t("button",P,[t("i",{class:"fas fa-spinner fa-pulse",onClick:l=>c.deleteItem(s),disabled:s.id===o.loadingItem},null,8,A),C(" x ")])]),t("td",null,n(s.product.title)+" ",1),t("td",null,[t("div",k,[b(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":l=>s.qty=l,disabled:s.id===o.loadingItem,onChange:l=>c.updataCartItem(s)},[(r(),i(_,null,p(20,l=>t("option",{value:l,key:`${l}12345`},n(l),9,T)),64))],40,E),[[x,s.qty]])])]),t("td",D,n(s.total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[U,t("td",q,n(o.cart.total),1)]),t("tr",null,[B,t("td",L,n(o.cart.final_total),1)])])])])}const S=g(I,[["render",R]]);export{S as default};
